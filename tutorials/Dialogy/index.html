<HTML>
<HEAD>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-K3867HR');</script>
  <!-- End Google Tag Manager -->
<TITLE>Ježurův tutoriál o práci s dialogy v OFP (verze 2.0)</TITLE>
<LINK REL="Stylesheet" TYPE="text/css" HREF="Files\default.css">
</HEAD>

<BODY BGCOLOR="#BAC3AE">
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K3867HR"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->

<FONT>
<CENTER>
<H2>JEŽURŮV TUTORIÁL O PRÁCI S DIALOGY V OFP (verze 2.0)</H2>
</CENTER>

<TABLE BORDER = "0" WIDTH = 100%>
 <TR>
  <TD WIDTH = 50%>
<UL>
 <LI>
  <A HREF="#Uvod" TITLE="Pár slov před tím, než začneme">Úvod</A>
 </LI>
 <LI>
  <A HREF="#FAQ" TITLE="Často kladené otázky">FAQ</A>
  <UL>
   <LI><A HREF="#FAQ_1">Co je to sakra ten dialog?</A>
   <LI><A HREF="#FAQ_2">Nějaký okna - na co mi to bude?</A>
   <LI><A HREF="#FAQ_3">Tak jo - co k tomu budu potřebovat?</A>
   <LI><A HREF="#FAQ_4">Je těžký se to naučit?</A>
  </UL>
 </LI>
 <LI>
  <A HREF="#Zdrojak" TITLE="Vzorová definice zdrojového kódu">Ukázka definice</A>
  <UL>
   <LI><A HREF="Files\Objekty.html" TARGET = _blank>Seznam objektů</A>
   <LI><A HREF="Files\Description.html" TARGET = _blank>Definice ukázkového dialogu</A>
   <LI><A HREF="https://files.ofpisnotdead.com/files/ofpd/_hosted/!Ruprt/editor-stuff/tutorials/TestDialog.Intro.rar">Ukázková mise</A>
  </UL>
 </LI>
 <LI>
  <A HREF="#PopisII" TITLE="Vysvětlení definice dialogu">Popis definice</A></LI>
  <UL>
   <LI><A HREF="#Popis_1">Typy objektů</A>
   <LI><A HREF="#Popis_2">Styly objektů - zarovnání</A>
   <LI><A HREF="#Popis_3">Styly objektů - vzhled</A>
   <LI><A HREF="#Popis_4">Parametry</A>
   <LI><A HREF="#Popis_5">Konečně samotný zdroj</A>
  </UL>
 <LI>
  <A HREF="#Upravy" TITLE="Úpravy kódu a vzhledu dialogů">Úpravy</A></LI>
  <UL>
   <LI><A HREF="#Upravy_1">Psaní kódu</A>
   <LI><A HREF="#Upravy_2">Formátování kódu</A>
   <LI><A HREF="#Upravy_3">Umisťování a zarovnávání objektů</A>
  </UL>
 <LI>
  <A HREF="#Zaver" TITLE="Závěr tohoto tutoriálu">Závěr</A></LI>
</UL>
  </TD>
  <TD ALIGN = "Center">
   <IMG SRC = "Files\Pictures\Jezuro.gif">
  </TD>
 </TR>
</TABLE>

<H2><A NAME="Uvod">Úvod</A></H2>

Dialogy jsou VELICE užitečným nástrojem v editaci misí a jejich pochopení vám rozšíří možnosti ve tvorbě misí stejně (ne-li víc) jako další nové příkazy od verze 1.75. To mě motivovalo k tomu, abych napsal tento tutoriál. Je to vlastně doplněná forma Ruprtova tutoriálu, který můžete najít v jeho <A HREF = "https://files.ofpisnotdead.com/files/ofpd/_hosted/!Ruprt/download/OFPEditorHelpCZ.zip">OFP EditorHelpu</A>.<BR><BR>

Toto je druhá verze mého původního tutoriálu. Seznam úprav jsem nikde nevypisoval, protože se změnilo v podstatě všechno... Druhá verze je navíc MNOHEM obsáhlejší a je opraveno i mnoho chyb, takže doporučuji tento tutoriál pročíst celý, i když máte za sebou původní verzi. Pokud byste z jekéhokoli důvodu původní verzi sháněli, najdete ji <A HREF = "./../Tutorial33.htm">tady</A>.<BR><BR>

Odkazy jsou psány <FONT CLASS="SampleLink">tmavě červeně</FONT>, označené odkazy <FONT CLASS="SampleHover">červeně a podtrženě</FONT>. Zdrojový kód bude psán <FONT CLASS="SamplePRE">tmavomodře</FONT>. Názvy souborů nebo jiné důležité věci budou <U>podtrženy</U>, popřípadě <B>zvýrazněny</B>.<BR><BR>

Nebudu se tady sáhodlouze rozepisovat o nějakých autorských právech - klidně si cokoli jakkoli změňte, když vám to pomůže. Jenom by mě docela nakrklo, kdyby někdo nahradil moje jméno svým a tohle prodával. Ale to se doufám stejně nestane (koneckonců, kdo by si to koupil, že :))<BR><BR>

Ať už mi budete chtít sdělit cokoliv, pište mi na mail <A HREF="mailto:jezuro@post.cz">jezuro@post.cz</A>.<BR>
Tak se pohodlně usaďte, lekce začíná...<BR><BR>

<H2><A NAME="FAQ">FAQ (Frequently Asked Questions) - Často kladené otázky</A></H2>

<B><U><A NAME="FAQ_1">Co je to sakra ten dialog?</A></B></U><BR>
1) Rozhovor dvou osob<BR>
2) Typ rozhraní v programech<BR>
-hádejte, o které možnosti se budeme bavit...<BR>
Možná vás to překvapí, ale CELÝ interface (tedy uživatelské rozhraní) Operace Flashpoint jsou dialogy. Dialogem může být takřka cokoliv - od nenápadé černé čárky až po tabulku pro vkládání jednotek v editoru. Ano, celý editor misí je také "jenom" soustava různých dialogových oken!<BR><BR>

<B><U><A NAME="FAQ_2">Nějaký okna - na co mi to bude?</A></B></U><BR>
Tuhle otázku jsem sám sobě taky položil. A sám si taky dal odpověď - bohužel tu klasickou (na ho*no, abych byl slušný.) To mě na nějakou dobu od této tématiky odradilo, ale když se mi dostal do rukou OFP EdiorHelp a ukázková mise k tématu dialogů, uvědomil jsem si, že tohle nemůžu jen tak přejít.<BR>
Pomocí dialogů můžete v OFP udělat v podstatě jakékoli okno, od černého čtverečku v pravém dolním rohu monitoru po velící panel koordinovaného útoku několika skupin spojený s rozkazy jednotlivým vojákům. Možností je nepřeberné množství a já vám v tomto tutoriálu ukážu základy, na nichž můžete vybudovat sebesložitější dialog.<BR><BR>

<B><U><A NAME="FAQ_3">Tak jo - co k tomu budu potřebovat?</A></B></U><BR>
Pro základní dialogy stačí jenom klasický soubor <U>Description.ext</U>. Dále můžete přidat obrázky a samozřejmě skritpy, soubory <U>Stringtable.csv</U> nebo funkce s příponou <U>.sqf</U>. Soubor <U>Description.ext</U> může být umístěn buď ve složce s misí (tam ho program hledá nejdřív) nebo v hlavní složce kampaně (když ho v misi nenajde, hledá tam.) A když není ani tady, podívá se do souboru <U>Resource.bin</U> ve složce OFP\Res\Bin, popřípadě OFP\BIN.<BR><BR>

<B><U><A NAME="FAQ_4">Je těžký se to naučit?</A></B></U><BR>
Je a není. Pokud máte chuť a trpělivost se s dialogy naučit pracovat, půjde to (skoro) samo ;)<BR><BR>

<H2><A NAME="Zdrojak">Ukázka definice</A></H2>
Na <A HREF = "Files\Objekty.html" TARGET = _blank">této stránce</A> najdete obrázky a definice všech objektů, které se mi podařilo v OFP vykoumat. 
Je to užitečné, ale jednotlivé objekty samy o sobě moc neznamenají. Důležité je i jejich uspořádání a funkce. Abyste měli lepší představu běžného dialogového okna, obrázek jednoho vzorového sem šoupnu (podotýkám, že v něm nejsou použity všechny objekty vyjmenované výše.)<BR>

<P ALIGN="Center"><IMG SRC="Files\Pictures\Popis.jpg"></P>

Abychom to měli pěkně pohromadě, tady je <A HREF = "Files\Description.html" TARGET = _blank>zdrojový kód</A> k tomuto dialogovému oknu. Hned potom si ho podrobně projdeme. Dále si můžete stáhnout <A HREF="https://files.ofpisnotdead.com/files/ofpd/_hosted/!Ruprt/editor-stuff/tutorials/TestDialog.Intro.rar" TITLE="Ukázková mise ke stáhnutí">ukázkovou misi</A> - je v ní nadefinován dialog z obrázku výše. Misi zkopírujte do složky <U>Flashpoint\Users\Jméno\missions</U>. No a teď se vrhneme na vysvětlování toho kódu.
<BR><BR>

<H2><A NAME="PopisII">Popis definice</A></H2>

Určitě nebude od věci si vysvětlit, co jednotlivé "značky" v definici dialogu znamenají. Čísla před názvy si vysvětlíme později.<BR><BR>

<B><U><A NAME="Popis_1">Typy objektů</A></U></B> - <U>určuje, jak se bude objekt chovat.</U><BR>
<FONT CLASS="SamplePRE">0 (CT_STATIC)</FONT> : Do této kategorie patří objekty, se kterými uživatel nemuže nic dělat - prostě tam jen jsou. Spadají sem například obrázky, titulní rámečky, pozadí okna, texty a další neinteraktivní objekty.<BR>
<FONT CLASS="SamplePRE">1 (CT_BUTTON)</FONT> : Tlačítka. Když je zmáčknete, ozve se ťuknutí a provede nějaká akce. O tom později.<BR>
<FONT CLASS="SamplePRE">2 (CT_EDIT)</FONT> : Kolonka na text, do které může uživatel sám něco vepsat a potom to třeba zkopírovat. Tohoto typu je třeba v editoru misí kolonka "Při aktivaci" ve spínačích.<BR>
<FONT CLASS="SamplePRE">3 (CT_SLIDER)</FONT> : Jezdec. Když uživatel ťukne na šipku a drží ji, může s ní jezdit po stupnici. Jezec je třeba "Pravděpodobnost výskytu" při vkládání jednotek v editoru.<BR>
<FONT CLASS="SamplePRE">4 (CT_COMBO)</FONT> : Vysunovací nabídka, "roletka". Při kliknutí na rámeček se nabídka rozbalí a vy si můžete vybrat z různých položek v ní. Při dalším kliknutí se nabídka zavře a v rámečku zůstane vámi vybraná položka. Použito třeba při výběru hudby ve spínačích.<BR>
<FONT CLASS="SamplePRE">5 (CT_LISTBOX)</FONT> : Další nabídka, tentokrát ale pevná - nevysunovací. Je použita například v obrazovce výběru ostrovů editoru misí.<BR><BR>

<B><U><A NAME="Popis_2">Styly objektů - zarovnání</A></U></B> - <U>určuje, jak bude objekt zarovnán.</U><BR>
<FONT CLASS="SamplePRE">0 (ST_LEFT)</FONT> : Běžné zarovnání - vlevo.<BR>
<FONT CLASS="SamplePRE">1 (ST_RIGHT)</FONT> : Zarovnání vpravo.<BR>
<FONT CLASS="SamplePRE">2 (ST_CENTER)</FONT> : Zarovnání doprostřed.<BR>
<FONT CLASS="SamplePRE">3 (ST_UP)</FONT> : Text začíná na horní straně vyhrazeného prostoru.<BR>
<FONT CLASS="SamplePRE">4 (ST_DOWN)</FONT> : Text začíná na dolní straně vyznačeného prostoru.<BR>
<FONT CLASS="SamplePRE">5 (ST_VCENTER)</FONT> : Tohle mi nějak nefungovalo, možná to má text nějak otáčet (?)<BR><BR>

<B><U><A NAME="Popis_3">Styly objektů - vzhled</A></U></B> - <U>určuje, jak bude objekt vypadat.</U><BR>
<FONT CLASS="SamplePRE">0 (ST_SINGLE)</FONT> : Text, který je takto vypsán, může být napsán jen na jeden řádek.<BR>
<FONT CLASS="SamplePRE">16 (ST_MULTI)</FONT> : Text, který je takto vypsán, může být napsán na více řádků.<BR>
<FONT CLASS="SamplePRE">32 (ST_TITLE)</FONT> : Rámeček pro nadpis dialogového okna.<BR>
<FONT CLASS="SamplePRE">48 (ST_PICTURE)</FONT> : Obrázek.<BR>
<FONT CLASS="SamplePRE">80 (ST_3D_BORDER)</FONT> : "Oblemování" - 3D okraj s pozadím dialogového okna.<BR>
<FONT CLASS="SamplePRE">96 (ST_NO_BORDER)</FONT> : Bez rámečku.<BR>
<FONT CLASS="SamplePRE">128 (ST_HUD_BACKGROUND)</FONT> : Poloprůhledné pozadí.<BR>
<FONT CLASS="SamplePRE">160 (ST_WITH_RECT)</FONT> : Okolo objektu (např. textu) bude vykreslen rámeček.<BR>
<FONT CLASS="SamplePRE">256 (ST_SHADOW)</FONT> : Objekt má stín.<BR>
<FONT CLASS="SamplePRE">512 (ST_NO_RECT)</FONT> : Objekt (např. text) není ohraničen rámečkem.<BR><BR>

<B><U><A NAME="Popis_4">Parametry</A></U></B> - <U>upřesňují podrobné vlastnosti dialogů.</U><BR>
<FONT CLASS="SamplePRE">IDD</FONT> : Identifikační číslo dialogu. Každý dialog musí mít svoje vlastní IDD - na toto číslo se odkazují různé příkazy. Za IDD si můžete dát libovolné číslo, doporučuji ale začít zažitou tisícovkou.<BR>
<FONT CLASS="SamplePRE">MovingEnable</FONT> : Nevím, co to dělá - při změně čísla nezaznamenáte změnu. Tak tam nechte tu jedničku...<BR>
<FONT CLASS="SamplePRE">IDC</FONT> : V podstatě to samé jako <FONT CLASS="SamplePRE">IDD</FONT>, jen je to identifikátor jednotlivých objektů.<BR>
<FONT CLASS="SamplePRE">type</FONT> : Viz <A HREF="#Popis_1">Typy objektů</A>.<BR>
<FONT CLASS="SamplePRE">style</FONT> : Viz Styly objektů - <A HREF="#Popis_2">zarovnání</A> a <A HREF="#Popis_3">vzhled</A>.<BR>
<FONT CLASS="SamplePRE">x</FONT> : Vzdálenost levého horního rohu objektu od levé strany monitoru.<BR>
<FONT CLASS="SamplePRE">y</FONT> : Vzdálenost horní strany objektu od horní strany monitoru.<BR>
<FONT CLASS="SamplePRE">w</FONT> : Šířka objektu.<BR>
<FONT CLASS="SamplePRE">h</FONT> : Výška objektu.<BR>
<FONT CLASS="SamplePRE">text</FONT> : Text, který bude vepsán v objektu (u <FONT CLASS="SamplePRE">RscText</FONT> to bude samozřejmě ten text :)), např. popis tlačítka. U <FONT CLASS="SamplePRE">RscPicture</FONT> je to název obrázku.<BR>
<FONT CLASS="SamplePRE">font</FONT> : Font písma použitý pro text. Zde je přehled těchto fontů:

<P ALIGN="Center"><IMG SRC="Files\Pictures\Fonts.jpg"></P>

<FONT CLASS="SamplePRE">SizeEx</FONT> : Relativní velikost písma vůči monitoru - například pro písmo o výšce dvacetiny obrazovky bude <FONT CLASS="SamplePRE">SizeEx = 0.05;</FONT>.<BR>
<FONT CLASS="SamplePRE">size</FONT> : Absolutní velikost písma - "<FONT CLASS="SamplePRE">size = 1;</FONT>" znamená defaultní (základní) velikost fontu, "<FONT CLASS="SamplePRE">size = 1.5;</FONT>" je o 50% větší než základní atd.<BR>
<FONT CLASS="SamplePRE">ColorBackground[]</FONT> : Barva pozadí ve formátu RGB + I (Red, Green, Blue, Intensity) - červená, zelená, modrá, intenzita. Když chcete udělat poloprůhledné pozadí, zadáte za intenzitu 0.5. Defaultní intenzita je 1 - neprůhledná.<BR>
<FONT CLASS="SamplePRE">ColorText[]</FONT> : To samé, jako <FONT CLASS="SamplePRE">ColorBackground[]</FONT>, ale vztahuje se na barvu písma.<BR>
<FONT CLASS="SamplePRE">color[]</FONT> : Barva písma objektu (např. tlačítka), formát stejný jako u předchozích dvou.<BR>
<FONT CLASS="SamplePRE">LineSpacing</FONT> : Řádkování. "<FONT CLASS="SamplePRE">LineSpacing = 1;</FONT>" je standardní řádkování, "<FONT CLASS="SamplePRE">LineSpacing = 1.5;</FONT>" udělá mezeru mezi řádky o 50% vyšší atd.<BR>
<FONT CLASS="SamplePRE">default</FONT> : Používá se u tlačítek. Když je hodnota zadána na 1, je tlačítko označeno už při spuštění dialogu a po stisku klávesy Enter se sepne. Pří hodnotě 0 musíte na tlačítko ťuknout myší.<BR>
<FONT CLASS="SamplePRE">SoundPush[]</FONT> : Zvuk, který tlačítko vydá, když na něj ťuknete. První parametr je název zvuku a cesta k němu, druhý je hlasitost (1.0 znamená běžnou hlasitost, ale používá se 0.2) a třetí udává rychlost, jakou je zvuk přehráván (standartně 1.0.)<BR>
<FONT CLASS="SamplePRE">SoundClick[]</FONT> : U tohoto si nejsem úplně jist. Jak můžete vidět v příkladu, při této události se žádný zvuk nepřehraje.<BR>
<FONT CLASS="SamplePRE">SoundEscape[]</FONT> : Tak tady si taky nejsem jist :(. Ten zvuk se občas přehraje - můžete ho slyšet, ale nevím přesně kdy.<BR>
<FONT CLASS="SamplePRE">WholeHeight</FONT> : Maximální výška rozbaleného ComboBoxu. Pokud se do této výšky všechny položky nevejdou, bude na pravé straně jezdec, kterým můžete výběr posouvat.<BR>
<FONT CLASS="SamplePRE">ColorSelect[]</FONT> : Barva písma vybrané položky ComboBoxu.<BR>
<FONT CLASS="SamplePRE">AutoComplete</FONT> : Sem můžete dosadit <FONT CLASS="SamplePRE">"Scripting"</FONT> - Potom se bude nad vepisovaným textem objevovat nabídka editačních příkazů. Jinak můžete nechat prázdné, tedy <FONT CLASS="SamplePRE">AutoComplete = "";</FONT>.<BR>
<FONT CLASS="SamplePRE">action</FONT> : Příkaz, který se vykoná po stisknutí tlačítka nebo aktivního textu.<BR>
<FONT CLASS="SamplePRE">RowHeight</FONT> : Tento příkaz mi fungoval jen u ListBoxů. Když nastavíte <FONT CLASS="SamplePRE">RowHeight = 0</FONT>, budou jednotlivé řádky, tedy položky v ListBoxu vysoké přesně podle velikosti svého písma. Když budete hodnotu zvyšovat, budou od sebe jednotlivé položky dál a dál.<BR><BR>

Jak vidíte, definice dialogu je v podstatě úplně něco jiného, než s čím jsme se mohli doposud setkat. Některé obecné zásady jsou ale stejné. Tak si je tady uvedeme nejdřív.<BR><BR>

<B><U><A NAME = "Popis_5">Konečně samotný zdroj</A></U></B> :<BR>
Na začátku zdrojového kódu jsou definovány typy a styly objektů, neboli výměna čísel za srozumitelnější slova - tady vlastní pojmenování smysl rozhodně má, protože se třeba <FONT CLASS="SamplePRE">ST_PICTURE</FONT> asi pamatuje lépe než číslo 48. Nejsou zde uvedeny všechny, ale jen ty, které se běžně používají.<BR>
Co to vlastně definice je? V tomto případě je to přiřazení vlastního názvu předem jinak definovaného typu nebo stylu. Vlastně takové "přejmenování".<BR><BR>

Potom následuje předdefinování, "nachystání" jednotlivých tříd. Každý objekt v dialogu <B>musí</B> mít definované všechny svoje atributy neboli vlastnosti. Toto předdefinování vás ušetří toho, abyste museli při každém začlenění nějakého objektu do dialogu vždycky definovat všechny jeho vlastnosti. Takhle si můžete předem připravit ty hodnoty, které budete měnit jen velmi zřídka nebo vůbec.<BR><BR>

A konečně poslední část přípravy dialogu - samotné umísťování objektů. O tom se podrobněji rozepíšu níže, protože to mnoha lidem dělá problémy.<BR><BR>

<H2><A NAME="Upravy">Úpravy kódu a vzhledu dialogů</A></H2>

<B><U><A NAME = "Upravy_1">Psaní kódu</A></U></B> :<BR>
U kódů v Operaci Flashpoint je úplně jedno, jestli budete psát všechna písmena <I>malá</I>, <I>VELKÁ</I>, nebo třeba <I>rOzHáZeNá</I>. Jak ale vidíte, ne všechny styly psaní jsou přehledné. Těm, co mají nějaké zkušenosti s programovacími jazyky (obzvláště C nebo C++), bude asi nejvíc vyhovovat psaní příkazů stylem "první písmeno prvního slova malé, první písmena ostatních slov velká (např. <FONT CLASS="SamplePRE">colorBackground[]</FONT>.) Většina (nebo alespoň mnoho) příkazů v OFP je totiž tvořeno složením více slov. Já píšu stylem "první písmena všech slov velká, pokud je příkaz pouze jednoslovný, na začátku malé (aby se mi to nepletlo s názvy proměnných nebo objektů, např. <FONT CLASS="SamplePRE">ColorBackground[]</FONT>)". Jak jsem ale řekl, je to jenom na vás...<BR>
Asi jste si všimli i toho, že se jinak píšou i poznámky. V souboru Description.ext se k tomuto účelu používají dvě lomítka ("<FONT CLASS="SamplePRE">//</FONT>".) Poznámku můžete vložit i za konec kódu v řádku.<BR>
Jako vždy, i zde platí, že název třídy nebo jakékoli jiné uživatelem pojmenované části dialogu <B>nesmí</B> obsahovat mezery ani diakritiku (tedy abych byl přesný, skriptovací jazyk OFP některé diakritické znaky, například "á", bere, ale většinu ne, takže pro jistotu diakritiku prostě nepoužívejte.)<BR><BR>

<B><U><A NAME = "Upravy_2">Formátování kódu</A></U></B> :<BR>
Stejně jako u velikosti písmen, i u formátování zdrojového kódu je vše jenom na vás. Mezi jednotlivými příkazy si můžete vložit kolik mezer chcete. Co ale určitě doporučuji, je používat tabulátor k rozdělení vnořených tříd. Když se vám třeba stane, že někde zapomenete ukončovací středník, bude pro vás daleko jednodušší najít kde. Doporučuji použít další tabulátor vždy, když otevřete nějakou další třídu levou složenou závorkou ("<FONT CLASS="SamplePRE">{</FONT>") Tady se můžete podívat na rozdíl mezi formátovaným a neformátovaným kódem:
<PRE>
// FORMÁTOVANÝ KÓD

class RscTest
{
	IDD = 1000;
	MovingEnable = 1;

	class Controls
	{
		class Background : RscBackground
		{
			x = 0.250000;
			y = 0.250000;
			w = 0.500000;
			h = 0.500000;
		};
		
		class SubBackground : RscGroupBox
		{
			x = 0.270000;
			y = 0.270000;
			w = 0.460000;
			h = 0.460000;
		};
	};
};

// NEFORMÁTOVANÝ KÓD

class RscTest
{
IDD=1000;
MovingEnable=1;
class Controls
{
class Background:RscBackground
{
x=0.250000;
y=0.250000;
w=0.500000;
h=0.500000;
};
class SubBackground:RscGroupBox
{
x=0.270000;
y=0.270000;
w=0.460000;
h=0.460000;
};
};
};
</PRE>

Tohle byl jenom krátky vyňatek, běžný kód bývá asi 20x delší :)<BR><BR>

<B><U><A NAME = "Upravy_3">Umisťování objektů a jejich zarovnávání</A></U></B> :<BR>
Nevím, jak ostatním, ale mně dělalo ze začátku největší problémy pochopit, jak správně nastavit <FONT CLASS = "SamplePRE">x</FONT>, <FONT CLASS = "SamplePRE">y</FONT>, <FONT CLASS = "SamplePRE">w</FONT> a <FONT CLASS = "SamplePRE">h</FONT> tak, aby objekty "seděly" tak, jak jsem potřeboval - buď byly moc dlouhé, moc vlevo, moc nahoře a ještě větší problémy nastaly, když jsem nastavil zarovnávání na střed. To mě přimělo se o této záležitosti trochu víc rozepsat.<BR><BR>
Zarovnáváním se nebudete zabývat jen u textu. Zdaleka ne. Souřadnice si budete pravděpodobně počítat na papír pro všechny objekty (pozadí, obrázky, slidery, tlačítka, ...), kreslit si, jak bude dialogové okno vypadat a upravovat velikosti objektů tak, aby se vám to tam všechno vlezlo (alespoň já to tak dělám...) Nejlepší pro správné pochopení bude, když si rozebereme pár vzorových příkladů (zdrojový kód nebudu vypisovat celý, ale jen hodnoty používané pro umísťování objektů - <FONT CLASS = "SamplePRE">x</FONT>, <FONT CLASS = "SamplePRE">y</FONT>, <FONT CLASS = "SamplePRE">w</FONT> a <FONT CLASS = "SamplePRE">h</FONT>.) Ještě přidám obrázek, abyste si význam těchto hodnot lépe představili:<BR><BR>

<P ALIGN="Center"><IMG SRC="Files\Pictures\XYWH.jpg"></P>

Myslím, že v tom už máte jasno ;) A teď ty příklady:<BR><BR>

<U>1) Objekt široký půlku obrazovky a vysoký čtvrtinu obrazovky. Umístěn má být doprostřed:</U>

<PRE>
x = 0.250000;
y = 0.350000;
w = 0.500000;
h = 0.250000;
</PRE>

<U>2) Objekt přes úplně celou obrazovku:</U>

<PRE>
x = 0.000000;
y = 0.000000;
w = 1.000000;
h = 1.000000;
</PRE>

<U><A NAME = "Ctverec">3) Objekt ve tvaru čtverce, jehož strana je dlouhá čtvrtinu šířky obrazovky, umístěný doprostřed obrazovky:</A></U>

<PRE>
x = 0.500000;
y = 0.333333;
w = 0.250000;
h = 0.333333;
</PRE>

Je důležité si uvědomit, že velikosti objektů jsou zadávány v poměru vůči monitoru. To je dobře vidět na posledním příkladu. Chcete-li, aby byl objekt čtverec s délkou strany rovnou čtvrtině šířky obrazovky (při rozlišení 1024x768 to bude 256 pixelů), musí mít hodnotu <FONT CLASS = "SamplePRE">y</FONT> jednu třetinu (0.333333) Poměr stran monitoru je totiž 4:3 (1024:768 je po zkrácení 4:3.)<BR>
"Objektem" můžeme nazvat jakoukoliv část dialogu, ať už jde o text, tlačítko, obrázek atd. U většiny objektů je postup zarovnávání jasný, ale jsou tu i některé "špeky". Tady je několik příkladů:<BR><BR>

<U>Text</U>: Je jedno, jestli text zarovnáváte doleva, na střed nebo doprava. Vždy mu pouze nastavíte prostor, který nesmí přesáhnout. Když je zarovnán doleva, bude začínat vlevo, když doporostřed, bude začínat uprostřed atd. Když se celý text do vámi nadefinovaného prostoru nevejde, bude "useknutý".<BR>
<U>Obrázek</U>: Vždycky se deformuje do požadovaných rozměrů. Pozor si na to dejte obzvlášť při rovnostranných obrázcích, viz. příklad <A HREF = "#Ctverec">výše</A>.<BR>
<U>Pozadí, tlačítka, ...</U>: Tady je to snad nejjasnější. Prostě to bude velké přesně jako zadaný protor. Platí i pro veškeré ostatní objekty obdélníkového tvaru.<BR>
<U>Slidery</U>: Je třeba si dát pozor a dobře rozlišovat horizontální (vodorovné) a vertikální (svilsé) slidery. V prvním případě bude větší hodnota <FONT CLASS = "SamplePRE">w</FONT>, tedy šířka a ve druhém logicky <FONT CLASS = "SamplePRE">h</FONT> - výška.<BR>
<U>Aktivní text</U>: Zarovnává se stejně jako normální text, ale je tu jedno úskalí. Jak můžete vidět na obrázku v <A HREF = "Files\Objekty.html" TARGET = _blank>seznamu objektů</A>, je tento text vždy podtržený. Ale ta podtrhovací linka se nevytvoří automaticky těsně pod textem (což by bylo logické), ale na spodní straně prostoru vymezeného pro aktivní text. Divný, co? Proto je třeba odzkoušet, jak je text vysoký.<BR><BR>

Obecně si stačí uvědomit, jak velkou část obrazovky objekt zabere. Řeknete si třeba, že uděláte tři stejně velká tlačítka vedle sebe se stejnými mezerami mezi sebou, třeba 0.05. A navíc to celé chcete mít pěkně uprostřed obrazovky. Velice jednoduché ;) Jako vzorové tlačítko nám poslouží to z <A HREF = "Files\Description.html#Tlacitko" TARGET = _blank>ukázkové definice</A>. To má šířku (<FONT CLASS = "SamplePRE">w</FONT>) 0.1 a výšku (<FONT CLASS = "SamplePRE">h</FONT>) 0.035.<BR>
Začneme vypočítáním hodnoty <FONT CLASS = "SamplePRE">x</FONT> prvního tlačítka. Pamatujte, že tlačítka budou tři, takže šířku jednoho tlačítka vynásobíme třemi. Do toho ale musíme započítat dvě mezery (mezi prvním a druhým a mezi druhým a třetím). Tím dostaneme šířku obrazovky, kterou nám budou tlačítka zabírat:

<PRE>
3 x 0.1 = 0.3
2 x 0.05 = 0.1
---------------------
0.3 + 0.1 = <U>0.4</U>
</PRE>

Tři tlačítka nám tedy budou zabírat 0.4 obrazovky. Budou uprostřed, takže napravo i nalevo nám zbude 0.3 obrazovky (<FONT CLASS = "SamplePRE">(1 - 0.4) / 2 = 0.3</FONT>.) Hodnota <FONT CLASS = "SamplePRE">x</FONT> prvního tlačítka tedy bude 0.3.<BR>
Teď hodnoty <FONT CLASS = "SamplePRE">x</FONT> ostatních tlačítek: k tomu 0.3 musíme přičíst šířku tlačítka i mezeru:

<PRE>
0.3 + 0.1 + 0.05 = <U>0.45</U>
</PRE>

Hodnota <FONT CLASS = "SamplePRE">x</FONT> druhého tlačítka bude 0.45. Stejným postupem pokračujeme i u třetího tlačítka:

<PRE>
0.45 + 0.1 + 0.05 = <U>0.6</U>
</PRE>

Nezapomeňte, že to teď počítáme podle druhého tlačítka - třetí tlačítko bude mít <FONT CLASS = "SamplePRE">x</FONT> rovno 0.6.<BR>
Hodnota <FONT CLASS = "SamplePRE">y</FONT> bude pro všechna tlačítka stejná, protože jsou ve stejné výšce. tlačítka jsou vysoká 0.035 obrazovky. Vypočítání <FONT CLASS = "SamplePRE">y</FONT> je hračka:

<PRE>
(1 - 0.035) / 2 = <U>0.4825</U>
</PRE>

Takže vlastně odečteme výšku tlačítka od celkové výšky monitoru (1) a potom vydělíme dvěma, abychom dostali jenom vzdálenost od horní strany obrazovky k horní straně tlačítka. Pro všechny tlačítka bude hodnota <FONT CLASS = "SamplePRE">y</FONT> 0.4825.<BR><BR>

<CENTER><IMG SRC = "Files\Pictures\Tlacitka.jpg"></CENTER><BR>

Tak. Všechno, co jsme potřebovali spočítat, máme. Já vím, že to takhle rozsáhle vysvětlený může vypadat překomplikovaně, ale když se na to pořádně podíváte, zjistíte, že na tom nic není.<BR>
<A HREF = "Files\Buttons.html" TARGET = _blank>Tady</A> je kompletní soubor Description.ext k těmto třem tlačítkům. Při klepání na ně se objeví různé hinty - můžete si Description zkopírovat do mise a vyzkoušet to.

<H2><A NAME="Zaver">Závěr</A></H2>

Tak a je tu konec. Doufám, že vám tenhle tutoriál aspoň trochu pomohl a vaše hranice v editaci misí se zase posunuly o kus dál. Ještě jsem chtěl přidat výčet a popis skriptiovacích příkazů týkajících se dialogů, ale ty má Ruprt všechny dobře vysvětlené v jeho <A HREF="https://files.ofpisnotdead.com/files/ofpd/_hosted/!Ruprt/download/OFPEditorHelpCZ.zip">OFP EditorHelpu</A>, který stejně všichni máme. Jestli něčemu nerozumíte, neváhejte a <A HREF="mailto:jezuro@post.cz">mailujte</A> jako o život.<BR><BR>

<P ALIGN = "Right"><IMG SRC = "Files\Pictures\Jezuro.gif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF = "http://2dmm.wz.cz"><IMG SRC = "Files\Pictures\2DMM.gif" BORDER = 0></A><BR><BR>

<B><U>Ježuro</U></B> (člen skupiny <A  HREF = "http://2dmm.wz.cz">2DMM Team</A>), 2004
</P>

</BODY>
</HTML>